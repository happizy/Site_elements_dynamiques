<?php session_start(); ?> 

<!DOCTYPE html>
<html lang="fr" >
<head>
  <meta charset="UTF-8">
  <title>Connexion</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat:400,700'>
<link rel="stylesheet" href="./css/style2.css">

</head>
<body>
<div class="index-container">
    <div class="col">
        <div class="heading">
            <h1>CONNEXION</h1>
        </div>
        <form method="post" action="" class="contact-form">
            <h3>Bienvenue chez vous...</h3>
            <input type="text" name="login" placeholder="Votre identifiant" class="form-input" required>
            <input type="password" name="mdp" placeholder="Votre mot de passe" class="form-input" required>
            <input type="submit" value="Se connecter" class="btn">
        </form>
    </div>
</div>
<!-- partial -->

<svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
    <linearGradient id="my-cool-gradient" x2="1" y2="1">
      <stop offset="0%" stop-color="#fc575e" />
      <stop offset="100%" stop-color="#90d5ec" />
    </linearGradient>
</svg>

<svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
    <linearGradient id="my-cool-gradientreverse" x2="1" y2="1">
      <stop offset="0%" stop-color="#90d5ec" />
      <stop offset="100%" stop-color="#fc575e" />
    </linearGradient>
</svg>

<svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
    <linearGradient id="my-cool-gradient" x2="1" y2="1">
      <stop offset="0%" stop-color="#fc575e" />
      <stop offset="100%" stop-color="#90d5ec" />
    </linearGradient>
</svg>

<svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
    <linearGradient id="my-cool-gradientreverse" x2="1" y2="1">
      <stop offset="0%" stop-color="#90d5ec" />
      <stop offset="100%" stop-color="#fc575e" />
    </linearGradient>
</svg>

<svg class="blob" id="blob1" width="539" height="413" viewBox="0 0 539 413" xmlns="http://www.w3.org/2000/svg">
    <path d="M389.658 0.0144679C263.658 1.51447 189.158 26.5145 92.6584 152.514C-106.342 415.014 66.1583 463.514 139.158 365.514C204.939 277.207 278.109 306.277 345.658 294.514C446.158 277.014 493.658 241.014 527.658 177.514C561.658 114.014 515.658 -1.48553 389.658 0.0144679Z" fill="black"/>
</svg>

<svg class="blob" id="blob1bis" width="539" height="413" viewBox="0 0 539 413" xmlns="http://www.w3.org/2000/svg">
    <path d="M389.658 0.0144679C263.658 1.51447 189.158 26.5145 92.6584 152.514C-106.342 415.014 66.1583 463.514 139.158 365.514C204.939 277.207 278.109 306.277 345.658 294.514C446.158 277.014 493.658 241.014 527.658 177.514C561.658 114.014 515.658 -1.48553 389.658 0.0144679Z" fill="black"/>
</svg>

<svg class="blob" id="blob2" width="544" height="440" viewBox="0 0 544 440" xmlns="http://www.w3.org/2000/svg">
    <path d="M275.797 183.508C193.797 134.508 111.297 -45.9918 30.297 11.0082C-50.7029 68.0083 50.297 173.508 105.297 220.008C160.297 266.508 162.297 402.008 275.797 431.508C389.297 461.008 563.297 407.508 541.297 299.508C519.297 191.508 357.797 232.508 275.797 183.508Z" fill="black"/>
</svg>

<svg class="blob" id="blob2bis" width="544" height="440" viewBox="0 0 544 440" xmlns="http://www.w3.org/2000/svg">
    <path d="M275.797 183.508C193.797 134.508 111.297 -45.9918 30.297 11.0082C-50.7029 68.0083 50.297 173.508 105.297 220.008C160.297 266.508 162.297 402.008 275.797 431.508C389.297 461.008 563.297 407.508 541.297 299.508C519.297 191.508 357.797 232.508 275.797 183.508Z" fill="black"/>
</svg>


<a href="index.html" class="home">
    <h1 class="hhome">
        Accueil
    </h1>
    <svg class="blob" id="blob3" width="472" height="367" viewBox="0 0 472 367" xmlns="http://www.w3.org/2000/svg">
        <path d="M102.216 58.6851C72.6491 78.4681 43.4567 81.0809 21.3753 114.301C-0.706126 147.522 -4.44875 181.862 4.53352 217.695C13.5158 253.528 48.3221 268.459 70.4035 289.361C92.4849 310.264 116.812 367 169.208 367C221.605 367 238.447 349.83 281.113 345.351C323.778 340.872 360.082 359.161 398.256 339.379C436.431 319.596 437.179 263.606 441.296 232.625C445.413 201.645 471.237 171.41 471.986 136.324C472.734 101.237 443.916 81.4542 418.092 64.6573C392.268 47.8605 385.157 16.8797 353.719 5.30862C322.281 -6.2625 300.574 5.30862 266.891 5.30862C233.207 5.30862 208.506 -6.63578 172.951 5.30862C137.396 17.253 131.782 38.9022 102.216 58.6851Z" fill="black"/>
    </svg>
</a>

<svg class="blob" id="blob4" width="472" height="367" viewBox="0 0 472 367" xmlns="http://www.w3.org/2000/svg">
    <path d="M102.216 58.6851C72.6491 78.4681 43.4567 81.0809 21.3753 114.301C-0.706126 147.522 -4.44875 181.862 4.53352 217.695C13.5158 253.528 48.3221 268.459 70.4035 289.361C92.4849 310.264 116.812 367 169.208 367C221.605 367 238.447 349.83 281.113 345.351C323.778 340.872 360.082 359.161 398.256 339.379C436.431 319.596 437.179 263.606 441.296 232.625C445.413 201.645 471.237 171.41 471.986 136.324C472.734 101.237 443.916 81.4542 418.092 64.6573C392.268 47.8605 385.157 16.8797 353.719 5.30862C322.281 -6.2625 300.574 5.30862 266.891 5.30862C233.207 5.30862 208.506 -6.63578 172.951 5.30862C137.396 17.253 131.782 38.9022 102.216 58.6851Z" fill="black"/>
</svg>
    

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.min.js"></script>
<script src="./js/script.js"></script>
</body>
</html>

<?php
    $link = mysqli_connect('localhost', 'root', 'lannion') or die ('Error connecting to mysql: ' . mysqli_error($link).'\r\n');

    if (isset($_POST['mdp'])){
        $login = htmlspecialchars($_POST['login']);
        $mdp = sha1(htmlspecialchars($_POST['mdp']));

        $_SESSION['login'] = $login;

        $use="use site";
        if (mysqli_query($link,$use)) {
            printf(mysqli_error($link));
        }

        $get = mysqli_query($link, "select * from site.usertemp where login = '".$login."' and mdp = '".$mdp."'");
        if((mysqli_num_rows($get))){
            echo "<script type='text/javascript'>document.location.replace('index_all.php');</script>";
        } else {
            echo "<script type='text/javascript'>document.location.replace('signin2.php');</script>"; 
        }
    }
?>